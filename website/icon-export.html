<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StreamAutoClipper Icon Export</title>
  <style>
    :root{--bg:#0f172a;--fg:#e2e8f0;--muted:#94a3b8;--accent:#06b6d4}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:Inter,Segoe UI,system-ui,Arial,sans-serif}
    .wrap{max-width:720px;margin:0 auto;padding:24px}
    .card{background:#111827;border:1px solid #1f2937;border-radius:12px;padding:20px}
    button{background:var(--accent);color:#001219;border:none;border-radius:10px;padding:12px 16px;font-weight:600;cursor:pointer}
    .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .muted{color:var(--muted)}
    img{max-width:200px;border-radius:16px;border:1px solid #1f2937}
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="/app-icon.svg" type="image/svg+xml" />
</head>
<body>
  <div class="wrap">
    <h1>StreamAutoClipper Icon Export</h1>
    <p class="muted">Export the app icon as a 1024×1024 PNG (≤5MB) for TikTok Developer Portal.</p>
    <div class="card">
      <div class="row" style="margin-bottom:16px">
        <img src="/app-icon.svg" alt="App Icon Preview" />
        <div>
          <div>Target size: 1024 × 1024</div>
          <div class="muted">Format: PNG • Transparent-safe background (dark)</div>
        </div>
      </div>
      <button id="exportBtn">Download 1024×1024 PNG</button>
      <a id="downloadLink" style="display:none" download="streamautoclipper-1024.png">download</a>
    </div>
  </div>
  <script>
    async function exportPng(){
      const SIZE = 1024;
      const svgUrl = '/app-icon.svg';
      const svgText = await fetch(svgUrl, { cache: 'no-store' }).then(r=>r.text());
      const svgBlob = new Blob([svgText], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(svgBlob);
      const img = new Image();
      img.crossOrigin = 'anonymous';
      const canvas = document.createElement('canvas');
      canvas.width = SIZE; canvas.height = SIZE;
      const ctx = canvas.getContext('2d');
      await new Promise((res, rej)=>{
        img.onload = ()=>res();
        img.onerror = (e)=>rej(e);
        img.src = url;
      });
      // Fill background to ensure consistent PNG look
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0,0,SIZE,SIZE);
      ctx.drawImage(img, 0, 0, SIZE, SIZE);
      URL.revokeObjectURL(url);
      const dataUrl = canvas.toDataURL('image/png');
      const a = document.getElementById('downloadLink');
      a.href = dataUrl; a.click();
    }
    document.getElementById('exportBtn').addEventListener('click', exportPng);
  </script>
</body>
</html>

